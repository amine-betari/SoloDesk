{# templates/partials/_project_list.html.twig #}

<div class="bg-white rounded-lg shadow p-6 text-gray-900">
    <h3 class="text-2xl font-bold mb-6">Liste des projets</h3>

    <table class="min-w-full divide-y divide-gray-200">
        <thead>
        <tr class="bg-gray-50">
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nom</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Client</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Statut</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date de fin</th>
        </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
        {% for project in projects %}
            <tr class="hover:bg-gray-100 cursor-pointer transition-colors duration-200">
                <td class="px-6 py-4 whitespace-nowrap text-gray-900">{{ project.name }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-gray-900">{{ project.client ? project.client.name : '—' }}</td>
                <td class="px-6 py-4 whitespace-nowrap text-gray-900">
                    {% set status = project.status|lower %}
                    {% if status == 'en cours' %}
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">En cours</span>
                    {% elseif status == 'en attente' %}
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">En attente</span>
                    {% elseif status == 'en retard' %}
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800">En retard</span>
                    {% else %}
                        <span>{{ project.status }}</span>
                    {% endif %}
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-gray-900">{{ project.endDate ? project.endDate|date('d/m/Y') : '—' }}</td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4" class="text-center py-4 text-gray-500">Aucun projet trouvé</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

